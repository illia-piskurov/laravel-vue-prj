<script setup lang="ts">
import { Head, Link } from '@inertiajs/vue3';
import { computed } from 'vue';

interface EducationalProgram {
    id: number;
    department: string;
    code_and_name: string;
    name_of_edu_program: string;
    degree: string;
    state_catalog: string;
    year_of_start: string;
}

const props = defineProps<{
    programs: EducationalProgram[];
}>();

// –ü—Ä–∏–º–µ—Ä –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É (–∏–Ω—Å—Ç–∏—Ç—É—Ç—É), –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ
const groupedPrograms = computed(() => {
    return props.programs.reduce(
        (acc, program) => {
            if (!acc[program.department]) {
                acc[program.department] = [];
            }
            acc[program.department].push(program);
            return acc;
        },
        {} as Record<string, EducationalProgram[]>,
    );
});
</script>

<template>
    <Head title="–û—Å–≤—ñ—Ç–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏" />

    <div class="min-h-screen bg-gray-100 font-sans">
        <div class="bg-blue-600 p-4 text-white shadow-md">
            <h1 class="text-2xl font-normal">–û—Å–≤—ñ—Ç–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏</h1>
        </div>

        <div class="mx-auto max-w-[1600px] p-4">
            <nav class="mb-6 text-sm text-blue-500">
                <Link href="/" class="hover:underline">–ì–æ–ª–æ–≤–Ω–∞</Link>
                <span class="mx-2 text-gray-400">/</span>
                <span class="text-gray-600">–û—Å–≤—ñ—Ç–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏</span>
            </nav>

            <div class="mb-6 flex gap-2">
                <button class="rounded bg-blue-600 px-4 py-2 text-white shadow transition hover:bg-blue-700">–î–æ–¥–∞—Ç–∏</button>
                <button class="rounded bg-gray-500 px-4 py-2 text-white shadow transition hover:bg-gray-600">–ê—Ä—Ö—ñ–≤</button>
            </div>

            <button class="mb-6 rounded bg-blue-700 px-4 py-2 text-sm text-white">–†–æ–∑–¥—Ä—É–∫—É–≤–∞—Ç–∏ —Ç–∞–±–ª–∏—Ü—é</button>

            <div class="overflow-hidden rounded-sm border border-gray-300 bg-white shadow">
                <table class="w-full border-collapse text-center text-sm">
                    <thead class="bg-gray-700 text-[11px] font-bold text-white uppercase">
                        <tr>
                            <th class="w-1/6 border border-gray-600 p-2">–í–∏–ø—É—Å–∫–æ–≤–∞ –∫–∞—Ñ–µ–¥—Ä–∞ / –¶–∏–∫–ª–æ–≤–∞ –∫–æ–º—ñ—Å—ñ—è</th>
                            <th class="border border-gray-600 p-2">–ö–æ–¥ —Ç–∞ –Ω–∞–∑–≤–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ—Å—Ç—ñ</th>
                            <th class="border border-gray-600 p-2">–ù–∞–∑–≤–∞ –æ—Å–≤—ñ—Ç–Ω—å–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏</th>
                            <th class="border border-gray-600 p-2">–°—Ç—É–ø—ñ–Ω—å –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏</th>
                            <th class="border border-gray-600 p-2">–°—Ç–∞–Ω —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —â–æ–¥–æ –û–ü —É –∫–∞—Ç–∞–ª–æ–∑—ñ</th>
                            <th class="border border-gray-600 p-2">–†–æ–∫–∏ –ø—Ä–∏–π–æ–º—É</th>
                            <th class="border border-gray-600 p-2">pdf</th>
                        </tr>
                    </thead>

                    <tr class="bg-gray-100">
                        <td v-for="i in 7" :key="i" class="border border-gray-300 p-1">
                            <input
                                type="text"
                                placeholder="–ü–æ—à—É–∫ –ø–æ –ø–æ–ª—é"
                                class="w-full rounded border border-gray-300 p-1 text-[11px] focus:border-blue-500 focus:outline-none"
                            />
                        </td>
                    </tr>

                    <tr class="bg-blue-500 text-[12px] font-bold text-white">
                        <td class="border border-blue-600 p-2">–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º</td>
                        <td class="border border-blue-600 p-2">–°—Ç–≤–æ—Ä–µ–Ω—ñ</td>
                        <td class="border border-blue-600 p-2 text-center">–ù–∞–¥—ñ—Å–ª–∞–Ω—ñ –Ω–∞ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é</td>
                        <td class="border border-blue-600 p-2">–í—ñ–¥—Ö–∏–ª–µ–Ω—ñ –ø—Ä–∏ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó</td>
                        <td class="border border-blue-600 p-2">–í–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ —Ç–∞ –æ–ø—Ä–∏–ª—é–¥–Ω–µ–Ω—ñ</td>
                        <td class="border border-blue-600 p-2">–í –∞—Ä—Ö—ñ–≤—ñ</td>
                        <td class="border border-blue-600 p-2"></td>
                    </tr>
                    <tr class="bg-white text-[13px]">
                        <td class="border border-gray-300 p-2">{{ programs.length }}</td>
                        <td class="border border-gray-300 p-2">166</td>
                        <td class="border border-gray-300 p-2">11</td>
                        <td class="border border-gray-300 p-2">190</td>
                        <td class="border border-gray-300 p-2">359</td>
                        <td class="border border-gray-300 p-2">718</td>
                        <td class="border border-gray-300 p-2"></td>
                    </tr>

                    <template v-for="(group, depName) in groupedPrograms" :key="depName">
                        <tr class="bg-blue-600 font-medium text-white italic">
                            <td colspan="7" class="border border-blue-700 p-2">
                                {{ depName }}
                            </td>
                        </tr>

                        <tr v-for="program in group" :key="program.id" class="text-[13px] transition-colors hover:bg-blue-50">
                            <td class="border border-gray-300 p-3">{{ program.department }}</td>
                            <td class="border border-gray-300 p-3">{{ program.code_and_name }}</td>
                            <td class="cursor-pointer border border-gray-300 p-3 text-blue-600 hover:underline">
                                {{ program.name_of_edu_program }}
                            </td>
                            <td class="border border-gray-300 p-3">{{ program.degree }}</td>
                            <td class="border border-gray-300 p-3">{{ program.state_catalog }}</td>
                            <td class="border border-gray-300 p-3">{{ program.year_of_start }}</td>
                            <td class="border border-gray-300 p-3 text-red-500">
                                <span class="cursor-pointer">üìÑ</span>
                            </td>
                        </tr>
                    </template>
                </table>
            </div>
        </div>
    </div>
</template>
